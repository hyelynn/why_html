<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ART BY US</title>

    <!-- Bootstrap 4.3.1 -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.0.js" charset="utf-8"></script>
    <script src="/js/kakao_sdk.js"></script>
    <script src="/js/studio.js"></script>


     <script>
         // SDK를 초기화 합니다. 사용할 앱의 JavaScript 키를 설정해 주세요.
         Kakao.init('d88bea310f4a39afbea3146fe1c0fa72');
         // SDK 초기화 여부를 판단합니다.
         console.log(Kakao.isInitialized());
     </script>
 

    <link rel="stylesheet" href="/css/custom.css">
    <script src="/js/custom.js"></script>
      
    <!-- Fontawesome -->
    <link rel="stylesheet" href="/css/fontawesome/css/all.min.css">
</head>

<body>
    <modal include-html="/include/header.html"></modal>
    <div class="py-md-3 px-5 py-2 text-center text-white bg-deep-dark top-notice">
        <span class="font-weight-light">코로나19에 대한 아트바이어스의 대책 및 환불 정책에 대한 최신 정보를 확인하세요.</span>
        <a href="#x" class="text-white d-lg-inline-block d-block">자세히 알아보기</a>
    </div>

    <nav class="navbar navbar-expand-lg navbar-light py-lg-3 py-1">
        <div class="container">
            <a class="navbar-brand" href="/index.html"><img src="http://artbyus.co.kr/img/logo.png"
                    srcset="http://artbyus.co.kr/img/logo@2x.png 2x, http://artbyus.co.kr/img/logo@3x.png 3x"></a>
            <div class="ml-auto align-items-center d-lg-none d-flex">
                <a class="text-dark mr-3 font-size-sm" href="/member/calendar.html"><i
                        class="far fa-calendar-alt"></i></a>
                <a class="text-dark mr-3 font-size-sm" href="/member/recent_list.html"><i
                        class="far fa-clock"></i></a>
                <a class="text-dark mr-2 font-size-sm" href="/member/purchase.html"><i
                        class="fas fa-shopping-cart"></i></a>
            </div>
            <button class="navbar-toggler border-0 font-size-md text-dark" type="button" data-toggle="collapse"
                data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false"
                aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>

            <div class="collapse navbar-collapse" id="navbarNavDropdown"></div>
        </div>
    </nav>
    <script src="/js/header.js"></script>

    <main role="main">
        <div class="border-bottom mt-lg-5 mt-4">
            <div class="container">
                <div class="d-flex text-center">
                    <a class="border border-bottom-0 d-block text-decoration-none text-dark font-size-s w-lg-20 py-md-3 py-2 px-md-0 px-3" href="board_notice.html">공지사항</a>
                    <a class="bg-yellow d-block text-decoration-none text-dark font-size-s w-lg-20 py-md-3 py-2 px-md-0 px-3" href="board_event.html">이벤트</a>
                </div>
            </div>
        </div>

        <div class="bg-light-more">
            <div class="container py-4">
                <!-- search -->
                <div class="d-flex justify-content-between mb-4 custom-inputs">
                    <input type="text" id="searchTxt" class="form-control w-75 mr-4" placeholder="검색어를 입력해 주세요">
                    <!-- <select name="" id="searchOpt" class="form-control w-25">
                        <option value="all">전체보기</option>
                        <option value="guest">게스트</option>
                        <option value="host">호스트</option>
                    </select> -->
                </div>
                <!-- list -->
                <ul id="eventUL" class="list-group list-group-flush border border-top-0 mb-4 font-size-s">
                    <li class="list-group-item py-3 position-relative">
                        <div class="row">
                            <div class="col-2 text-center">
                                <p class="mb-0 text-sky">호스트</p>
                            </div>
                            <div class="col-10">
                                <p class="mb-0 font-weight-light">커버위크 투표하시고, 댄서에게 연습실을 선물하세요!</p>
                            </div>
                        </div>
                        <a href="board_view.html" class="stretched-link text-decoration-none"></a>
                    </li>
                    <li class="list-group-item py-3 position-relative">
                        <div class="row">
                            <div class="col-2 text-center">
                                <p class="mb-0 text-sky">게스트</p>
                            </div>
                            <div class="col-10">
                                <p class="mb-0 font-weight-light">[긴급] 네이버페이 서비스 오류로 인한 네이버페이 결제 불가 사항 안내드립니다.</p>
                            </div>
                        </div>
                        <a href="board_view.html" class="stretched-link text-decoration-none"></a>
                    </li>
                </ul>

                <nav aria-label="Page navigation">
                    <ul id="pageUl" class="pagination justify-content-center custom-navigation">
                        <li id="pager" class="page-arrow">
                            <a class="page-link" href="#x" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
                        </li>
                        <li class="page-item"><a class="page-link" href="#x">1</a></li>
                        <li class="page-item"><a class="page-link" href="#x">2</a></li>
                        <li class="page-item"><a class="page-link" href="#x">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#x" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </main>

    <footer include-html="/include/footer.html"></footer>
    <script src="/js/naver_login.js"></script>
    <script src="/js/login.js"></script>

    <script>includeHTML({ });</script>
    <script>login_header();</script>
    <script>
        var eventList = [];
        var eventSearchList = [];
<!-- 검색 옵션에 대한 검색 -->
        $("#searchOpt").change(function (){
            eventSearchList.empty();
            for(var j = 0; j < eventList.length;j++){
                if(eventList[j].event_target == this.value){
                    eventSearchList.append(eventList[j]);
                }
            }
            writeList(eventSearchList);
        });
<!-- 검색 값에 대한 검색 -->
        $("#searchTxt").change(function(){
            eventSearchList.empty();
            for(var j = 0; j < eventList.length;j++){
                if(eventList[j].event_title == this.value){
                    eventSearchList.append(eventList[j]);
                }
            }
            writeList(eventSearchList);
        });
<!-- 리스트 작성 -->
        function writeList(list){
            writeUL(1,list);
            $(".page-item").remove();
            for(var j = 0;j < list.length/10;j++){
                var page_item = '<li class="page-item"><a class="page-link" href="#x" onclick="writeUL('+(j+1)+','+list+');">'+(j+1)+'</a></li>';
                $("#pageUl").append(page_item);
            }
            var page_arrow = '<li class="page-item"><a class="page-link" href="#x" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>'
            $("#pageUl").append(page_arrow);
        }

        function writeUL(item, list){
            $("#eventUL").empty();
            for(var i = (item-1) * 10; i < item * 10; i++){
                if(i == list.length)break;
                var notice = '<li class="list-group-item py-3 position-relative">'
                                +'<div class="row">'
                                    +'<div class="col-2 text-center">'
                                        +'<p class="mb-0 text-sky">호스트</p>'
                                    +'</div>'
                                    +'<div class="col-10">'
                                        +'<p class="mb-0 font-weight-light">'+list[i].notice_title+'</p>'
                                    +'</div>'
                                +'</div>'
                                +'<a href="board_view.html?view_id='+list[i].notice_id+'" class="stretched-link text-decoration-none"></a>'
                            +'</li>';
                $("#eventUL").append(notice);
            }
        }
<!-- 페이지 ready -->
        $(document).ready(function (){
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (xhr.readyState === xhr.DONE) { 
                    if (xhr.status === 200 || xhr.status === 201) {
                        var list = JSON.parse(xhr.responseText);
                        for(var i = 0;i < list.length; i++){
                            // if(list[i].notice_target == sessionStorage.getItem("user_type")){
                            if(list[i].notice_target == 'h'){
                                eventList.push(list[i]);
                            }
                        }
                        writeList(eventList);
                    } else {
                        alert("등록이 정상적으로 이루어지지 않았습니다. 다시 시도해주세요.");
                        console.error(xhr.responseText);
                    }
                }else{
                    
                }
            };
            xhr.open('GET', 'http://3.34.150.116:3000/event',true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send();
        });


    </script>
</body>

</html>
