<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html">
    <title>ART BY US</title>

    <!-- Bootstrap 4.3.1 -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/css/star-rating-svg.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>

    <script src="/js/include.js"></script>
    <script src="/js/studio_info.js"></script>
    <!-- Custom -->
    <script type="text/javascript" src="https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.0.js"
        charset="utf-8"></script>
    <script src="/js/kakao_sdk.js"></script>

    <!-- Datepicker -->
    <link href="/css/datepicker.css" rel="stylesheet">
    <script src="/js/datepicker.js"></script>

    <script>
        // SDK를 초기화 합니다. 사용할 앱의 JavaScript 키를 설정해 주세요.
        Kakao.init('d88bea310f4a39afbea3146fe1c0fa72');
        // SDK 초기화 여부를 판단합니다.
        console.log(Kakao.isInitialized());
    </script>


    <link rel="stylesheet" href="/css/custom.css">
    <script src="/js/custom.js"></script>
    <script src="/js/jquery.star-rating-svg.min.js"></script>

    <!-- Fontawesome -->
    <link rel="stylesheet" href="/css/fontawesome/css/all.min.css">
</head>

<body>
    <modal include-html="/include/header.html"></modal>
    <modal include-html="/include/common/header_sub_modal.html"></modal>
    <div class="py-md-3 px-5 py-2 text-center text-white bg-deep-dark top-notice">
        <span class="font-weight-light">코로나19에 대한 아트바이어스의 대책 및 환불 정책에 대한 최신 정보를 확인하세요.</span>
        <a href="#x" class="text-white d-lg-inline-block d-block">자세히 알아보기</a>
    </div>

    <nav class="navbar navbar-expand-lg navbar-light py-lg-3 py-1">
        <div class="container">
            <a class="navbar-brand" href="/index.html"><img src="http://artbyus.co.kr/img/logo.png"
                    srcset="http://artbyus.co.kr/img/logo@2x.png 2x, http://artbyus.co.kr/img/logo@3x.png 3x"></a>
            <div class="ml-auto align-items-center d-lg-none d-flex">
                <a class="text-dark mr-3 font-size-sm" href="/member/calendar.html"><i
                        class="far fa-calendar-alt"></i></a>
                <a class="text-dark mr-3 font-size-sm" href="/member/recent_list.html"><i class="far fa-clock"></i></a>
                <a class="text-dark mr-2 font-size-sm" href="/member/purchase.html"><i
                        class="fas fa-shopping-cart"></i></a>
            </div>
            <button class="navbar-toggler border-0 font-size-md text-dark" type="button" data-toggle="collapse"
                data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false"
                aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>

            <div class="collapse navbar-collapse" id="navbarNavDropdown"></div>
        </div>
    </nav>
    <script src="/js/header.js"></script>

    <main role="main">
        <div class="bg-light-more py-lg-5 py-4">
            <div class="container">
                <div class="d-lg-flex view-type">
                    <!-- info -->
                    <div class="float-lg-left mr-5_ pr-lg-5 overflow-hidden left">
                        <!-- slide -->
                        <div id="carouselStudioView" class="carousel slide" data-ride="carousel">
                            <ol id="indicator" class="carousel-indicators my-4"></ol>
                            <div id="carousel" class="carousel-inner"></div>
                        </div>
                        <div id="title"></div>

                        <!-- info tab pages -->
                        <ul class="nav nav-pills nav-fill flex-nowrap custom-nav-tabs">
                            <li class="nav-item">
                                <a class="nav-link px-lg-0 px-3 active" data-toggle="tab" href="#info">정보</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link px-lg-0 px-3" data-toggle="tab" href="#terms">이용약관</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link px-lg-0 px-3" data-toggle="tab" href="#refund">환불규정</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link px-lg-0 px-3" data-toggle="tab" href="#review">후기 및 질문</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link px-lg-0 px-3" data-toggle="tab" href="#contact">위치 및 호스트정보</a>
                            </li>
                        </ul>

                        <div class="tab-content">
                            <!-- tab 1 -->
                            <div class="tab-pane fade show active" id="info"></div>
                            <div class="tab-pane fade" id="terms"></div>

                            <!-- tab 2 -->
                            <div class="tab-pane fade" id="refund">
                                <refund include-html="/include/refund.html"></refund>
                            </div>

                            <!-- tab 3 -->
                            <div class="tab-pane fade" id="review">
                                <div class="my-5">
                                    <!-- >>>> Q&A -->
                                    <div class="mb-10">
                                        <div class="d-flex justify-content-between">
                                            <h4 class="mb-md-4 mb-2 text-bullet">질문과 답변</h4>

                                            <button type="button"
                                                class="btn rounded-pill bg-dark text-white font-weight-light px-lg-4 px-2 font-size-xs btn-sm"
                                                data-toggle="modal" data-target="#qnaModal">질문 작성하기</button>
                                        </div>

                                        <ul id="qnas" class="list-unstyled view-type-review"> </ul>
                                    </div>

                                    <!-- Review <<<< -->
                                    <div class="d-flex justify-content-between" id="review_info">
                                        <button type="button"
                                            class="btn rounded-pill bg-dark text-white font-weight-light px-lg-4 px-2 font-size-xs btn-sm"
                                            data-toggle="modal" data-target="#reviewModal">후기 작성하기</button>

                                        <ul id="reviews" class="list-unstyled view-type-review"> </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="contact"></div>
                        </div>
                    </div>

                    <!-- schedule -->
                    <div class="float-lg-right right">
                        <div class="row mb-4">
                            <div class="col-6">
                                <button type="button" class="btn border rounded-xl bg-white btn-block py-2"
                                    onclick="addWishList(this);">
                                    <i class="far fa-heart"></i>
                                    <span class="ml-1 font-size-xs">1,459</span>
                                </button>
                            </div>
                            <div class="col-6">
                                <button type="button" class="btn border rounded-xl bg-white btn-block py-2">
                                    <i class="fas fa-share-alt text-purple"></i>
                                    <span class="ml-1 font-size-xs">공유하기</span>
                                </button>
                            </div>
                        </div>

                        <div class="card rounded-0 border-bottom-0">
                            <div class="card-body">
                                <div id="title_purchase"></div>


                                <!-- Calendar -->
                                <div class="py- border-bottom">
                                    <div id="datePicker" class="datepicker-inline mb-4" onchange="price_maker();"></div>

                                    <div class="row mb-4">
                                        <div class="col-4">
                                            <div class="d-flex align-items-center">
                                                <span class="d-inline-block bg-secondary"
                                                    style="width: 18px; height: 18px;"></span>
                                                <span class="font-weight-light font-size-xs ml-2">선택불가</span>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="d-flex align-items-center">
                                                <span class="d-inline-block bg-dark float-left"
                                                    style="width: 6px; height: 18px;"></span>
                                                <span class="d-inline-block bg-sky float-left"
                                                    style="width: 6px; height: 18px;"></span>
                                                <span class="d-inline-block bg-hot-pink float-left"
                                                    style="width: 6px; height: 18px;"></span>
                                                <span class="font-weight-light font-size-xs ml-2">선택가능</span>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="d-flex align-items-center">
                                                <span class="d-inline-block rounded-circle bg-red"
                                                    style="width: 18px; height: 18px;"></span>
                                                <span class="font-weight-light font-size-xs ml-2">선택일</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Time -->
                                <div class="py-4 border-bottom">
                                    <div class="row">
                                        <div class="col-6 custom-inputs">
                                            <p>시작시간</p>
                                            <select name="" id="start_times" class="form-control"
                                                onchange="price_maker();">
                                                <option value=0>00:00</option>
                                                <option value=1>01:00</option>
                                                <option value=2>02:00</option>
                                                <option value=3>03:00</option>
                                                <option value=4>04:00</option>
                                                <option value=5>05:00</option>
                                                <option value=6>06:00</option>
                                                <option value=7>07:00</option>
                                                <option value=8>08:00</option>
                                                <option value=9>09:00</option>
                                                <option value=10>10:00</option>
                                                <option value=11>11:00</option>
                                                <option value=12>12:00</option>
                                                <option value=13>13:00</option>
                                                <option value=14>14:00</option>
                                                <option value=15>15:00</option>
                                                <option value=16>16:00</option>
                                                <option value=17>17:00</option>
                                                <option value=18>18:00</option>
                                                <option value=19>19:00</option>
                                                <option value=20>20:00</option>
                                                <option value=21>21:00</option>
                                                <option value=22>22:00</option>
                                                <option value=23>23:00</option>
                                            </select>
                                        </div>
                                        <div class="col-6 custom-inputs">
                                            <p>종료시간</p>
                                            <select name="" id="end_times" class="form-control"
                                                onchange="price_maker();">
                                                <option value=1>01:00</option>
                                                <option value=2>02:00</option>
                                                <option value=3>03:00</option>
                                                <option value=4>04:00</option>
                                                <option value=5>05:00</option>
                                                <option value=6>06:00</option>
                                                <option value=7>07:00</option>
                                                <option value=8>08:00</option>
                                                <option value=9>09:00</option>
                                                <option value=10>10:00</option>
                                                <option value=11>11:00</option>
                                                <option value=12>12:00</option>
                                                <option value=13>13:00</option>
                                                <option value=14>14:00</option>
                                                <option value=15>15:00</option>
                                                <option value=16>16:00</option>
                                                <option value=17>17:00</option>
                                                <option value=18>18:00</option>
                                                <option value=19>19:00</option>
                                                <option value=20>20:00</option>
                                                <option value=21>21:00</option>
                                                <option value=22>22:00</option>
                                                <option value=23>23:00</option>
                                                <option value=24>24:00</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Number of member -->
                                <div class="py-4 border-bottom">
                                    <p>인원수</p>
                                    <div class="d-flex justify-content-between custom-inputs custom-inputs-sub">
                                        <button type="button" id="decreaseQuantity" class="btn border"
                                            style="width: 50px;">-</button>
                                        <input type="text" id="numberUpDown" value="1"
                                            class="text-center form-control border-right-0 border-left-0"
                                            style="width: calc(100% - 100px);">
                                        <button type="button" id="increaseQuantity" class="btn border"
                                            style="width: 50px;">+</button>
                                    </div>
                                </div>

                                <!-- Info -->
                                <div id="priceinfo" class="pt-4">

                                </div>
                            </div>
                        </div>

                        <!-- Buttons -->
                        <button type="button"
                            class="btn btn-block py-3 border-0 rounded-0 font-weighㅎt-light mb-3 bg-yellow"
                            onclick="purchase();">스튜디오 예약하기</button>
                        <div class="d-flex bg-yellow">
                            <button type="button"
                                class="btn w-50 py-3 border-0 rounded-0 font-weight-light">전화하기</button>
                            <span class="d-inline-block my-3" style="border-right: 1px solid #fff"></span>
                            <button type="button" class="btn w-50 py-3 border-0 rounded-0 font-weight-light">1:1
                                채팅</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer include-html="/include/footer.html"></footer>
    <script>includeHTML({});</script>
    <script>login_header();</script>
    <script>price_maker();</script>
    <script>load_review(); load_qna();</script>

    <script src="/js/naver_login.js"></script>
    <script src="/js/login.js"></script>
</body>


<script>
    function sendQna() {
        let id = sessionStorage.getItem("id");
        if (id != null) {
            let msg = $("#qna_text").val();

            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState === xhr.DONE) {
                    $("#qnas").prepend(
                            $(
                            "<li class='mb-3'><div class='d-flex'><div class='mr-lg-4 mr-2'><span class='d-inline-block rounded-circle user-bg'></span></div>"+
                            "<div class=''><p class='font-size-m'> "+sessionStorage.getItem("nickname")+" </p>"+
                            "<p class='font-weight-light font-size-s text-light-gray'>"+msg+"</p>"+
                            "<p class='text-light-gray-more font-size-xs'> 방금 전 </p></div></div></li>"+
                            "<li class='mb-3'><div class='d-flex'><div class='mr-lg-4 mr-2'><span class='d-inline-block rounded-circle user-bg'></span></div>"
                            )
                        )
                } else {
                }
            };

            xhr.open("POST", "http://3.34.150.116:3000/studio/qna");
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xhr.send("studio_key=" + value + "&user_id=" + id + "&msg=" + msg);
        } else {
            alert("로그인이 필요합니다");
        }
    }

    function sendReview() {
        let id = sessionStorage.getItem("id");
        if (id != null) {
            let msg = $("#review_text").val();

            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState === xhr.DONE) {
                    $("#reviews").prepend(
                            $(
                            "<li class='mb-3'><div class='d-flex'><div class='mr-lg-4 mr-2'><span class='d-inline-block rounded-circle user-bg'></span></div>"+
                            "<div class=''><p class='font-size-m'> "+sessionStorage.getItem("nickname")+" </p>"+
                            "<p class='font-weight-light font-size-s text-light-gray'>"+msg+"</p>"+
                            "<p class='text-light-gray-more font-size-xs'> 방금 전 </p></div></div></li>"+
                            "<li class='mb-3'><div class='d-flex'><div class='mr-lg-4 mr-2'><span class='d-inline-block rounded-circle user-bg'></span></div>"
                            )
                        )
                } else {
                }
            };

            xhr.open("POST", "http://3.34.150.116:3000/studio/review");
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xhr.send("studio_key=" + value + "&user_id=" + id + "&msg=" + msg);
            console.log(valnum + " : " + msg);
        } else {
            alert("로그인이 필요합니다");
        }
    }

    function addCart() {
        var cartInfo = JSON.parse(sessionStorage.getItem("cart"));
        var cart = [];

        if (curr_price > 0) {
            for (var item in cartInfo) {
                cart.push({
                    img: cartInfo[item].img,
                    title: cartInfo[item].title,
                    price: cartInfo[item].price,
                    date: cartInfo[item].date,
                });
            }

            cart.push({
                img: img_link,
                title: title,
                price: curr_price,
                date:
                    "예약일시 : " +
                    $("#datePicker").value +
                    " " +
                    $("#start_times option:selected").text() +
                    " ~ " +
                    $("#end_times option:selected").text(),
            });

            sessionStorage.setItem("cart", JSON.stringify(cart));

            console.log(cart);
            alert("장바구니에 상품이 담겼습니다");
        } else {
            alert("상품 정보를 선택해주세요");
        }
    }

    function purchase() {
        addCart();
        location.href = "http://artbyus.co.kr/member/purchase.html";
    }


    $(function () {
        // datepicker
        $('#datePicker').datepicker({
            language: 'ko',
            navTitles: {
                days: '<span class="font-weight-bold mr-2">M</span> MM, <i>yyyy</i>'
            },
            prevHtml: '<i class="fas fa-chevron-left"></i>',
            nextHtml: '<i class="fas fa-chevron-right"></i>',
        })

        // number of people
        $('#decreaseQuantity').click(function (e) {
            e.preventDefault();
            var stat = $('#numberUpDown').val();
            var num = parseInt(stat, 10);
            num--;

            if (num <= 0) {
                num = 1;
            }
            $('#numberUpDown').val(num);
            price_maker();
        });

        $('#increaseQuantity').click(function (e) {
            e.preventDefault();
            var stat = $('#numberUpDown').val();
            var num = parseInt(stat, 10);
            num++;

            if (num > 100) {
                num = 100;
            }
            $('#numberUpDown').val(num);
            price_maker();
        });
    });
</script>

</html>